{% extends "app/base.html" %}
{% load utils %}
{% load static %}

{% block content %}

<!-- トップ絵部分 -->
<header class="masthead">
    <div class="container h-100">
        <div class="row h-100 align-items-center">
            <div class="col-12 text-center TDL-table">
                {% if area == 'bazaar' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% elif area == 'adventure' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% elif area == 'western' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% elif area == 'critter' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% elif area == 'fantasy' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% elif area == 'toon' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% elif area == 'tomorrow' %}
                    <img src="{% static 'img/fantasy_top.png' %}" alt="">
                {% else %}
                    <img src="{% static 'img/TDL_top_rough.png' %}" class="top-pic" alt="">
                    {% if category == 'story' %}
                        <a href="{% url 'index' 'bazaar' 'story' %}" class="bazaar-link">ワールドバザール</a>
                        <a href="{% url 'index' 'adventure' 'story' %}" class="adventure-link">アドベンチャーランド</a>
                        <a href="{% url 'index' 'western' 'story' %}" class="western-link">ウエスタンランド</a>
                        <a href="{% url 'index' 'critter' 'story' %}" class="critter-link">クリッターカントリー</a>
                        <a href="{% url 'index' 'fantasy' 'story' %}" class="fantasy-link">ファンタジーランド</a>
                        <a href="{% url 'index' 'toon' 'story' %}" class="toon-link">トゥーンタウン</a>
                        <a href="{% url 'index' 'tomorrow' 'story' %}" class="tomorrow-link">トゥモローランド</a>
                    {% elif category == 'mickey' %}
                        <a href="{% url 'index' 'bazaar' 'mickey' %}" class="bazaar-link">ワールドバザール</a>
                        <a href="{% url 'index' 'adventure' 'mickey' %}" class="adventure-link">アドベンチャーランド</a>
                        <a href="{% url 'index' 'western' 'mickey' %}" class="western-link">ウエスタンランド</a>
                        <a href="{% url 'index' 'critter' 'mickey' %}" class="critter-link">クリッターカントリー</a>
                        <a href="{% url 'index' 'fantasy' 'mickey' %}" class="fantasy-link">ファンタジーランド</a>
                        <a href="{% url 'index' 'toon' 'mickey' %}" class="toon-link">トゥーンタウン</a>
                        <a href="{% url 'index' 'tomorrow' 'mickey' %}" class="tomorrow-link">トゥモローランド</a>
                    {% elif category == 'trivia' %}
                        <a href="{% url 'index' 'bazaar' 'trivia' %}" class="bazaar-link">ワールドバザール</a>
                        <a href="{% url 'index' 'adventure' 'trivia' %}" class="adventure-link">アドベンチャーランド</a>
                        <a href="{% url 'index' 'western' 'trivia' %}" class="western-link">ウエスタンランド</a>
                        <a href="{% url 'index' 'critter' 'trivia' %}" class="critter-link">クリッターカントリー</a>
                        <a href="{% url 'index' 'fantasy' 'trivia' %}" class="fantasy-link">ファンタジーランド</a>
                        <a href="{% url 'index' 'toon' 'trivia' %}" class="toon-link">トゥーンタウン</a>
                        <a href="{% url 'index' 'tomorrow' 'trivia' %}" class="tomorrow-link">トゥモローランド</a>
                    {% elif category == 'other' %}
                        <a href="{% url 'index' 'bazaar' 'other' %}" class="bazaar-link">ワールドバザール</a>
                        <a href="{% url 'index' 'adventure' 'other' %}" class="adventure-link">アドベンチャーランド</a>
                        <a href="{% url 'index' 'western' 'other' %}" class="western-link">ウエスタンランド</a>
                        <a href="{% url 'index' 'critter' 'other' %}" class="critter-link">クリッターカントリー</a>
                        <a href="{% url 'index' 'fantasy' 'other' %}" class="fantasy-link">ファンタジーランド</a>
                        <a href="{% url 'index' 'toon' 'other' %}" class="toon-link">トゥーンタウン</a>
                        <a href="{% url 'index' 'tomorrow' 'other' %}" class="tomorrow-link">トゥモローランド</a>
                    {% elif category == 'all' %}
                        <a href="{% url 'index' 'bazaar' 'all' %}" class="bazaar-link">ワールドバザール</a>
                        <a href="{% url 'index' 'adventure' 'all' %}" class="adventure-link">アドベンチャーランド</a>
                        <a href="{% url 'index' 'western' 'all' %}" class="western-link">ウエスタンランド</a>
                        <a href="{% url 'index' 'critter' 'all' %}" class="critter-link">クリッターカントリー</a>
                        <a href="{% url 'index' 'fantasy' 'all' %}" class="fantasy-link">ファンタジーランド</a>
                        <a href="{% url 'index' 'toon' 'all' %}" class="toon-link">トゥーンタウン</a>
                        <a href="{% url 'index' 'tomorrow' 'all' %}" class="tomorrow-link">トゥモローランド</a>
                    {% else %}
                        <a href="{% url 'index' 'bazaar' %}" class="bazaar-link">ワールドバザール</a>
                        <a href="{% url 'index' 'adventure' %}" class="adventure-link">アドベンチャーランド</a>
                        <a href="{% url 'index' 'western' %}" class="western-link">ウエスタンランド</a>
                        <a href="{% url 'index' 'critter' %}" class="critter-link">クリッターカントリー</a>
                        <a href="{% url 'index' 'fantasy' %}" class="fantasy-link">ファンタジーランド</a>
                        <a href="{% url 'index' 'toon' %}" class="toon-link">トゥーンタウン</a>
                        <a href="{% url 'index' 'tomorrow' %}" class="tomorrow-link">トゥモローランド</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</header>

<div class="row my-4">

</div>

<div class="picmenu">
    <ul class="table-ul">
        <li>
            <a href="{% url 'category' '全て' %}">
                <img src="{% static 'img/box.png' %}" alt="全て" class="icon-category">
                <p>全て</p>
            </a>
        </li>
        <li>
            {% if area == 'bazaar' %}
                <a href="{% url 'index' 'bazaar' 'story' %}">
            {% elif area == 'adventure' %}
                <a href="{% url 'index' 'adventure' 'story' %}">
            {% elif area == 'western' %}
                <a href="{% url 'index' 'western' 'story' %}">
            {% elif area == 'critter' %}
                <a href="{% url 'index' 'critter' 'story' %}">
            {% elif area == 'fantasy' %}
                <a href="{% url 'index' 'fantasy' 'story' %}">
            {% elif area == 'toon' %}
                <a href="{% url 'index' 'toon' 'story' %}">
            {% elif area == 'tomorrow' %}
                <a href="{% url 'index' 'tomorrow' 'story' %}">
            {% else %}
                <a href="{% url 'index' 'all' 'story' %}">
            {% endif %}
                <img src="{% static 'img/memo.png' %}" alt="ストーリー" class="icon-category">
                <p>ストーリー</p>
            </a>
        </li>
        <li>
            {% if area == 'bazaar' %}
                <a href="{% url 'index' 'fantasy' 'mickey' %}">
            {% elif area == 'adventure' %}
                <a href="{% url 'index' 'toon' 'mickey' %}">
            {% elif area == 'western' %}
                <a href="{% url 'index' 'western' 'mickey' %}">
            {% elif area == 'critter' %}
                <a href="{% url 'index' 'critter' 'mickey' %}">
            {% elif area == 'fantasy' %}
                <a href="{% url 'index' 'fantasy' 'mickey' %}">
            {% elif area == 'toon' %}
                <a href="{% url 'index' 'toon' 'mickey' %}">
            {% elif area == 'tomorrow' %}
                <a href="{% url 'index' 'tomorrow' 'mickey' %}">
            {% else %}
                <a href="{% url 'index' 'all' 'mickey' %}">
            {% endif %}
                <img src="{% static 'img/mickey_b.png' %}" alt="隠れミッキー" class="icon-category">
                <p>隠れミッキー</p>
            </a>
        </li>
        <li>
            {% if area == 'bazaar' %}
                <a href="{% url 'index' 'fantasy' 'trivia' %}">
            {% elif area == 'adventure' %}
                <a href="{% url 'index' 'toon' 'trivia' %}">
            {% elif area == 'western' %}
                <a href="{% url 'index' 'western' 'trivia' %}">
            {% elif area == 'critter' %}
                <a href="{% url 'index' 'critter' 'trivia' %}">
            {% elif area == 'fantasy' %}
                <a href="{% url 'index' 'fantasy' 'trivia' %}">
            {% elif area == 'toon' %}
                <a href="{% url 'index' 'toon' 'trivia' %}">
            {% elif area == 'tomorrow' %}
                <a href="{% url 'index' 'tomorrow' 'trivia' %}">
            {% else %}
                <a href="{% url 'index' 'all' 'trivia' %}">
            {% endif %}
                <img src="{% static 'img/blub.png' %}" alt="豆知識" class="icon-category">
                <p>豆知識</p>
            </a>
        </li>
        <li>
            {% if area == 'bazaar' %}
                <a href="{% url 'index' 'fantasy' 'other' %}">
            {% elif area == 'adventure' %}
                <a href="{% url 'index' 'toon' 'other' %}">
            {% elif area == 'western' %}
                <a href="{% url 'index' 'western' 'other' %}">
            {% elif area == 'critter' %}
                <a href="{% url 'index' 'critter' 'other' %}">
            {% elif area == 'fantasy' %}
                <a href="{% url 'index' 'fantasy' 'other' %}">
            {% elif area == 'toon' %}
                <a href="{% url 'index' 'toon' 'other' %}">
            {% elif area == 'tomorrow' %}
                <a href="{% url 'index' 'tomorrow' 'other' %}">
            {% else %}
                <a href="{% url 'index' 'all' 'other' %}">
            {% endif %}
                <img src="{% static 'img/bookmark.png' %}" alt="その他" class="icon-category">
                <p>その他</p>
            </a>
        </li>
    </ul>
</div>

{% for post in post_data %}
<div class="row">
    <div class="col-md-4">
        <a href="#">
            {% if post.image %}
            <img class="img-fluid rounded mb-3 mb-md-0" src="{{ post.image.url }}" alt="">
            {% endif %}
        </a>
    </div>
    <div class="col-md-8">
        <div class="author-created">
            <h7 class="text_left"><img src="{{ post.author.icon.url }}" class="user-icon">{{ post.author }}</h7>
            <h7 class="text_right">{{ post.created }}</h7>
        </div>
        <h3>{{ post.title }}</h3>
        <p>{{ post.content|truncatechars:100 }}</p>
        <a style="float:right;" href="{% url 'post_detail' post.id %}">続きを読む</a>
    </div>
</div>
<hr>
{% endfor %}

<ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
    <li class="page-item">
        <a class="page-link" href="?{%  url_replace request 'page' page_obj.previous_page_number %}">
            <span aria-hidden="true">&laquo;</span>
        </a>
    </li>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
        <li class="page-item active">
            <a class="page-link" href="#!">
                {{ num }}
            </a>
        </li>
        {% else %}
        <li class="page-item">
            <a class="page-link" href="?{%  url_replace request 'page' num %}">
                {{ num }}
            </a>
        </li>
        {% endif %}
    {% endfor %}
    {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link" href="?{%  url_replace request 'page' page_obj.next_page_number %}">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    {% endif %}
</ul>

<div class="text-right">
    <a href="{% url 'post_new' %}" class="btn btn-info">新しい記事を投稿</a>
</div>
{% endblock %}